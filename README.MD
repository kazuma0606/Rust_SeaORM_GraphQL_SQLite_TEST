# ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã®æ¤œè¨

## ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Rust ã‚’ç”¨ã„ã¦ **CQRS + GraphQL API** ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚  
`async-graphql` ã‚’æ¡ç”¨ã—ã€`SeaORM` ã‚’ä½¿ç”¨ã—ãŸå‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿æ“ä½œã‚’å®Ÿç¾ã€‚  
é–‹ç™ºæ™‚ã¯ **SQLite**ã€æœ¬ç•ªç’°å¢ƒã§ã¯ **PostgreSQL** ã¸ç°¡å˜ã«ç§»è¡Œå¯èƒ½ãªæ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚

---

## ğŸ“Œ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
| ã‚«ãƒ†ã‚´ãƒª            | ãƒ„ãƒ¼ãƒ« / ãƒ©ã‚¤ãƒ–ãƒ©ãƒª                           | èª¬æ˜ |
|-----------------|---------------------------------|------------------------------------------------------------|
| **è¨€èª**        | Rust                           | å®‰å…¨æ€§ãƒ»é«˜é€Ÿæ€§ã‚’æŒã¤ã‚·ã‚¹ãƒ†ãƒ è¨€èª |
| **API**         | [async-graphql](https://github.com/async-graphql/async-graphql) | GraphQL ã® Rust å®Ÿè£… |
| **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | [Actix-web](https://github.com/actix/actix-web) | éåŒæœŸå¯¾å¿œã®é«˜æ€§èƒ½ãª Web ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **ORM (DBç®¡ç†)** | [SeaORM](https://github.com/SeaQL/sea-orm) | Rust ã®éåŒæœŸ ORM (SQLx ãƒ™ãƒ¼ã‚¹) |
| **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹** | SQLite / PostgreSQL            | é–‹ç™ºæ™‚ã¯ SQLiteã€æœ¬ç•ªç’°å¢ƒã§ã¯ PostgreSQL ãªã©ã‚’æ¡ç”¨å¯èƒ½ |
| **IDç®¡ç†**      | [uuid](https://github.com/uuid-rs/uuid) | ãƒ¦ãƒ‹ãƒ¼ã‚¯ãª ID ã‚’ç”Ÿæˆ |
| **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³** | [validator](https://github.com/Keats/validator) | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã† |
| **éåŒæœŸå‡¦ç†**   | [tokio](https://github.com/tokio-rs/tokio) | Rust ã®éåŒæœŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| **ä¾å­˜ç®¡ç†**     | Cargo                           | Rust ã®æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ |
| **å‹ç®¡ç†**      | serde                           | JSON ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º |

---

## ğŸ“‚ ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
```
rust_cqrs/
â”‚â”€â”€ Cargo.toml         # Rust ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ main.rs        # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ gql/           # GraphQL ã‚¹ã‚­ãƒ¼ãƒã‚„ãƒªã‚¾ãƒ«ãƒ
â”‚   â”‚   â”œâ”€â”€ schema.rs  # GraphQL ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ types.rs   # GraphQL ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
â”‚   â”œâ”€â”€ db.rs          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã¨ç®¡ç†
â”‚   â”œâ”€â”€ models/        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ user.rs    # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ command/       # CQRS: ã‚³ãƒãƒ³ãƒ‰ (æ›¸ãè¾¼ã¿ç³»å‡¦ç†)
â”‚   â”‚   â”œâ”€â”€ create_user.rs
â”‚   â”‚   â”œâ”€â”€ delete_user.rs
â”‚   â”œâ”€â”€ query/         # CQRS: ã‚¯ã‚¨ãƒª (èª­ã¿è¾¼ã¿ç³»å‡¦ç†)
â”‚   â”‚   â”œâ”€â”€ get_user.rs
â”‚   â”‚   â”œâ”€â”€ list_users.rs
â”‚â”€â”€ .gitignore         # Git ç®¡ç†å¯¾è±¡å¤–ã®è¨­å®š
â”‚â”€â”€ README.md          # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
```

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿè¡Œæ–¹æ³•

### **ğŸ”¹ 1. Rust ç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
Rust ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚
```sh
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### **ğŸ”¹ 2. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```sh
git clone https://github.com/your-repo/rust_cqrs.git
cd rust_cqrs
```

### **ğŸ”¹ 3. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```sh
cargo build
```

### **ğŸ”¹ 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–**
```sh
cargo run --bin init_db
```

### **ğŸ”¹ 5. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
```sh
cargo run
```

---

## ğŸ›  GraphQL API ã®ãƒ†ã‚¹ãƒˆ
GraphQL ã® API ã¯ã€`http://localhost:8080/playground` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ GraphQL Playground ã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

### **ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ (Mutation)**
```graphql
mutation {
  createUser(input: { name: "Alice", email: "alice@example.com" }) {
    id
    name
    email
  }
}
```

### **ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾— (Query)**
```graphql
query {
  getUser(id: "7647b478-5848-49c7-b928-63cf7bda0384") {
    id
    name
    email
  }
}
```

### **ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾— (Query)**
```graphql
query {
  users {
    id
    name
    email
  }
}
```

### **ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ (Mutation)**
```graphql
mutation {
  deleteUser(id: "7647b478-5848-49c7-b928-63cf7bda0384")
}
```

---

## ğŸ— ä»Šå¾Œã®æ”¹å–„ç‚¹
- **æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤**
  - Docker ã‚³ãƒ³ãƒ†ãƒŠåŒ–
  - PostgreSQL ã¸ã®ç§»è¡Œ
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
  - Redis ãªã©ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å°å…¥
- **ãƒ†ã‚¹ãƒˆã®è¿½åŠ **
  - `cargo test` ã‚’æ´»ç”¨ã—ãŸè‡ªå‹•ãƒ†ã‚¹ãƒˆ

---

## ğŸ“œ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ MIT ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ã‚‚ã¨ã§æä¾›ã•ã‚Œã¾ã™ã€‚

---

## ğŸ‘¨â€ğŸ’» é–‹ç™ºè€…
- **Your Name** (GitHub: [yoshimura hisanori](https://github.com/kazuma0606))

---

ğŸš€ **ã“ã‚Œã§ Rust ã§ã® CQRS + GraphQL API ã®åŸºç›¤ãŒå®Œæˆã—ã¾ã—ãŸï¼** ğŸ‰
```

